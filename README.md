# 📷 照片水印工具

> ⚠️ **开发中项目** - 此应用目前处于积极开发阶段，功能尚不完整，可能存在bug和性能问题。请谨慎用于重要照片的处理。

一款基于 Electron + React + TypeScript 开发的桌面应用程序，为照片添加美观的水印框架，自动提取并显示相机型号、镜头参数等EXIF信息。

## 🚧 开发状态

**当前版本**: v1.0.0-alpha  
**开发进度**: 约 75%  
**稳定性**: Alpha 测试阶段

### ✅ 已实现功能

- **实时预览** - 参数调整时即时查看水印效果
- **多照片管理** - 支持批量导入和预览切换
- **EXIF信息提取** - 自动读取相机型号、镜头、拍摄参数
- **毛玻璃背景** - 美观的模糊背景效果
- **参数调整** - 主图占比、圆角、阴影、字体等设置
- **批量生成** - 一键生成所有照片的水印版本
- **缩放和拖拽** - 预览区支持Ctrl+滚轮缩放和鼠标拖拽
- **自定义标题栏** - 现代化的无边框窗口设计
- **软糖UI风格** - 新拟态设计，美观现代

### 🚧 开发中功能

- **相机品牌图标** - 计划添加各品牌相机图标显示
- **多种水印模板** - 计划支持不同风格的水印模板
- **配置保存** - 保存和恢复用户自定义设置
- **更多输出格式** - 目前仅支持JPEG，计划支持PNG等
- **性能优化** - 大量照片处理时的性能改进

### ❌ 已知问题

- **大文件处理** - 超大图片文件可能导致内存占用过高
- **RAW格式支持** - 部分RAW格式可能无法正确读取
- **UI响应性** - 在处理大量照片时界面可能出现卡顿
- **错误处理** - 某些异常情况的错误提示不够详细
- **Windows兼容性** - 主要在Windows下测试，macOS兼容性待验证

## 🛠️ 技术栈

- **前端框架**: React 18 + TypeScript
- **桌面框架**: Electron 28  
- **构建工具**: Vite 5
- **图像处理**: Canvas API + Sharp (后端处理)
- **EXIF读取**: exifr
- **虚拟列表**: react-window (性能优化)
- **UI设计**: 自定义新拟态 (Neumorphism) 风格

## 🚀 快速开始

### 环境要求

- Node.js 16+ 
- npm 或 yarn
- Windows 10+ / macOS 10.14+ / Linux (未测试)

### 安装和运行

```bash
# 克隆项目
git clone <repository-url>
cd automated-photo-stamp-tool

# 安装依赖
npm install

# 启动开发环境
npm run dev
# 或使用简化命令
node dev.js
```

### 构建发布版本

```bash
# 构建应用
npm run build

# 打包成安装程序
npm run dist
```

## 📁 项目结构

```
automated-photo-stamp-tool/
├── electron/                 # Electron 主进程
│   ├── main.ts              # 窗口管理、文件操作
│   ├── preload.ts           # 渲染进程通信接口
│   └── tsconfig.json
├── src/                     # React 渲染进程
│   ├── components/          # UI 组件
│   │   ├── TitleBar.tsx     # 自定义标题栏
│   │   ├── Sidebar.tsx      # 参数设置面板  
│   │   ├── PreviewArea.tsx  # 实时预览区域
│   │   ├── PhotoList.tsx    # 照片列表 (虚拟滚动)
│   │   ├── ExifInfo.tsx     # EXIF信息显示
│   │   ├── ProgressModal.tsx # 生成进度弹窗
│   │   └── Footer.tsx       # 底部操作按钮
│   ├── utils/              # 工具函数
│   │   ├── watermarkGenerator.ts # 水印生成核心逻辑
│   │   └── exifUtils.ts    # EXIF信息处理
│   ├── types/              # TypeScript 类型定义
│   ├── App.tsx             # 主应用组件
│   └── index.css           # 全局样式 (新拟态设计)
├── package.json
└── README.md
```

## 🎛️ 功能说明

### 水印参数设置

- **主图占比** (50-100%): 控制照片在水印框架中的大小
- **圆角大小** (0-200px): 设置照片的圆角程度  
- **阴影大小** (0-20): 调整照片投影效果强度
- **输出质量** (50-100): 控制最终JPEG图片质量
- **自定义尺寸**: 手动设置输出图片尺寸
- **纯色背景**: 使用主题色替代毛玻璃背景
- **横屏输出**: 强制竖图也输出为横向布局
- **字体选择**: 多种字体选项用于水印文字

### 交互功能

- **键盘导航**: 左右箭头键切换照片
- **缩放预览**: Ctrl+滚轮缩放，鼠标拖拽平移  
- **滚轮切换**: 在缩略图列表上滚动切换照片
- **EXIF显示**: 可切换显示详细拍摄信息
- **批量处理**: 支持一次处理几十张照片

## ⚠️ 使用注意事项

1. **备份原图**: 建议使用前备份原始照片文件
2. **文件大小**: 超过50MB的图片可能处理较慢
3. **内存使用**: 同时处理大量大图片时注意内存占用
4. **格式支持**: 当前主要支持常见JPEG、PNG格式
5. **输出路径**: 确保输出目录有足够的磁盘空间

## 🐛 报告问题

如果遇到问题，请提供以下信息：

- 操作系统版本
- 图片文件格式和大小  
- 详细的错误信息或截图
- 重现问题的步骤

## 🤝 贡献指南

欢迎贡献代码或提出改进建议！请：

1. Fork 本项目
2. 创建特性分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 开启 Pull Request

## 📄 许可证

MIT License - 详见 [LICENSE](LICENSE) 文件

---

> 💡 **提示**: 此项目仍在活跃开发中，功能和界面可能频繁变更。建议关注项目更新，获取最新功能和bug修复。
